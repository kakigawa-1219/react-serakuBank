{"ast":null,"code":"import { signInAction } from './actions';\nimport { push } from 'connected-react-router';\nimport { auth, db } from '../../firebase/index';\nexport const signIn = (email, password) => {\n  return async dispatch => {\n    if (email === \"\" || password === \"\") {\n      alert(\"未入力があります\");\n      return false;\n    }\n\n    auth.signInWithEmailAndPassword(email.password).then(result => {\n      const user = result.user;\n\n      if (user) {\n        const uid = user.uid;\n        db.collection('users').doc(uid).get().then(snapshot => {\n          const date = snapshot.data();\n          dispatch(signInAction({\n            isSignedIn: true,\n            role: date.role,\n            uid: uid,\n            username: date.username\n          }));\n          dispatch(push('/'));\n        });\n      }\n    });\n  };\n};\nexport const signUp = (username, email, password, confirmPassword) => {\n  return async dispatch => {\n    if (username === \"\" || email === \"\" || password === \"\" || confirmPassword === \"\") {\n      alert(\"未入力があります\");\n      return false;\n    }\n\n    if (password !== confirmPassword) {\n      alert(\"パスワードが一致していません\");\n      return false;\n    }\n\n    return auth.createUserWithEmailAndPassword(email, password).then(result => {\n      const user = result.user;\n\n      if (user) {\n        const uid = user.uid;\n        const userInitialDate = {\n          email: email,\n          role: \"customer\",\n          uid: uid,\n          username: username\n        };\n        db.collection('users').doc(uid).set(userInitialDate).then(async () => {\n          dispatch(push('/'));\n        });\n      }\n    });\n  };\n};","map":{"version":3,"sources":["/Users/ro/Desktop/React/reactapp/src/reducks/users/operations.js"],"names":["signInAction","push","auth","db","signIn","email","password","dispatch","alert","signInWithEmailAndPassword","then","result","user","uid","collection","doc","get","snapshot","date","data","isSignedIn","role","username","signUp","confirmPassword","createUserWithEmailAndPassword","userInitialDate","set"],"mappings":"AAAA,SAAQA,YAAR,QAA2B,WAA3B;AACA,SAAQC,IAAR,QAAmB,wBAAnB;AACA,SAAQC,IAAR,EAAcC,EAAd,QAAuB,sBAAvB;AAGA,OAAO,MAAMC,MAAM,GAAG,CAACC,KAAD,EAAQC,QAAR,KAAqB;AACvC,SAAO,MAAOC,QAAP,IAAmB;AACtB,QAAGF,KAAK,KAAK,EAAV,IAAgBC,QAAQ,KAAK,EAAhC,EAAmC;AAC/BE,MAAAA,KAAK,CAAC,UAAD,CAAL;AACA,aAAO,KAAP;AACH;;AACDN,IAAAA,IAAI,CAACO,0BAAL,CAAgCJ,KAAK,CAACC,QAAtC,EACKI,IADL,CACUC,MAAM,IAAI;AACZ,YAAMC,IAAI,GAAGD,MAAM,CAACC,IAApB;;AAEA,UAAGA,IAAH,EAAS;AACL,cAAMC,GAAG,GAAGD,IAAI,CAACC,GAAjB;AAEAV,QAAAA,EAAE,CAACW,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2BF,GAA3B,EAAgCG,GAAhC,GACCN,IADD,CACMO,QAAQ,IAAI;AACd,gBAAMC,IAAI,GAAGD,QAAQ,CAACE,IAAT,EAAb;AAEAZ,UAAAA,QAAQ,CAACP,YAAY,CAAC;AAClBoB,YAAAA,UAAU,EAAC,IADO;AAElBC,YAAAA,IAAI,EAACH,IAAI,CAACG,IAFQ;AAGlBR,YAAAA,GAAG,EAAEA,GAHa;AAIlBS,YAAAA,QAAQ,EAAEJ,IAAI,CAACI;AAJG,WAAD,CAAb,CAAR;AAMAf,UAAAA,QAAQ,CAACN,IAAI,CAAC,GAAD,CAAL,CAAR;AACH,SAXD;AAYH;AACJ,KApBL;AAqBH,GA1BD;AA4BH,CA7BM;AAmCP,OAAO,MAAMsB,MAAM,GAAG,CAACD,QAAD,EAAWjB,KAAX,EAAkBC,QAAlB,EAA4BkB,eAA5B,KAAgD;AAElE,SAAO,MAAMjB,QAAN,IAAmB;AACtB,QAAGe,QAAQ,KAAK,EAAb,IAAmBjB,KAAK,KAAK,EAA7B,IAAmCC,QAAQ,KAAK,EAAhD,IAAsDkB,eAAe,KAAK,EAA7E,EAAiF;AAC7EhB,MAAAA,KAAK,CAAC,UAAD,CAAL;AACA,aAAO,KAAP;AACH;;AACD,QAAIF,QAAQ,KAAKkB,eAAjB,EAAkC;AAC9BhB,MAAAA,KAAK,CAAC,gBAAD,CAAL;AACA,aAAO,KAAP;AACH;;AACD,WAAON,IAAI,CAACuB,8BAAL,CAAoCpB,KAApC,EAA0CC,QAA1C,EACNI,IADM,CACDC,MAAM,IAAI;AACZ,YAAMC,IAAI,GAAGD,MAAM,CAACC,IAApB;;AAEA,UAAGA,IAAH,EAAS;AACL,cAAMC,GAAG,GAAGD,IAAI,CAACC,GAAjB;AACA,cAAMa,eAAe,GAAG;AACpBrB,UAAAA,KAAK,EAAEA,KADa;AAEpBgB,UAAAA,IAAI,EAAE,UAFc;AAGpBR,UAAAA,GAAG,EAAEA,GAHe;AAIpBS,UAAAA,QAAQ,EAAEA;AAJU,SAAxB;AAMAnB,QAAAA,EAAE,CAACW,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2BF,GAA3B,EAAgCc,GAAhC,CAAoCD,eAApC,EACChB,IADD,CACM,YAAW;AACbH,UAAAA,QAAQ,CAACN,IAAI,CAAC,GAAD,CAAL,CAAR;AACH,SAHD;AAIH;AACJ,KAjBM,CAAP;AAkBH,GA3BD;AA6BH,CA/BM","sourcesContent":["import {signInAction} from './actions';\nimport {push} from 'connected-react-router';\nimport {auth, db} from '../../firebase/index';\n\n\nexport const signIn = (email, password) => {\n    return async (dispatch) =>{\n        if(email === \"\" || password === \"\"){\n            alert(\"未入力があります\")\n            return false\n        }\n        auth.signInWithEmailAndPassword(email.password)\n            .then(result => {\n                const user = result.user;\n\n                if(user) {\n                    const uid = user.uid;\n\n                    db.collection('users').doc(uid).get()\n                    .then(snapshot => {\n                        const date = snapshot.data();\n                    \n                        dispatch(signInAction({\n                            isSignedIn:true,\n                            role:date.role,\n                            uid: uid,\n                            username: date.username\n                        }))\n                        dispatch(push('/'));\n                    })\n                }\n            })\n    }\n    \n}\n\n\n\n\n\nexport const signUp = (username, email, password, confirmPassword) => {\n\n    return async(dispatch) => {\n        if(username === \"\" || email === \"\" || password === \"\" || confirmPassword === \"\" ){\n            alert(\"未入力があります\")\n            return false\n        }\n        if (password !== confirmPassword ){\n            alert(\"パスワードが一致していません\")\n            return false\n        }\n        return auth.createUserWithEmailAndPassword(email,password)\n        .then(result => {\n            const user = result.user;\n\n            if(user) {\n                const uid = user.uid;\n                const userInitialDate = {\n                    email: email,\n                    role: \"customer\",\n                    uid: uid,\n                    username: username\n                };\n                db.collection('users').doc(uid).set(userInitialDate)\n                .then(async() => {\n                    dispatch(push('/'))\n                })\n            }\n        })\n    }\n  \n}"]},"metadata":{},"sourceType":"module"}